{% extends "SensioLabsJobBoardBundle::layout.html.twig" %}

{% block page_class 'home' %}

{% block splash %}
    <div id="splash">
        <div class="section">
            <article>
                <img src="{{ asset('bundles/sensiolabsjobboard/images/home/megaphone.png') }}" alt="Job !" class="megaphone" />
                <p class="description">{{ 'home.description'|trans|raw }}</p>
            </article>
        </div>
    </div>
{% endblock %}

{% block metadata %}
    {{ parent() }}
    <link rel="alternate" type="application/rss+xml"  href="#" title="Jobs RSS feed" />
{% endblock %}

{% block content %}
    <div id="left">
        <div class="filter">
            <span class="title"><img class="sprite-icon-location" alt=">" src="{{ asset('bundles/sensiolabsjobboard/images/blank.png') }}"/>{{ 'home.location'|trans }}</span>
            <ul>
                <li {% if not app.request.query.has('country') %}class="active"{% endif %}>
                    <a href="{{ path('homepage', (app.request.query.all)|merge({'country': null})) }}">
                        {{ 'home.countries'|trans }}
                    </a>
                </li>
                {% for data in countries %}
                    <li {% if loop.index > 3 %}style="display:none"{% endif %}
                        {% if data.country ==  app.request.query.get('country') %}class="active"{% endif %}>

                        <a href="{{ path('homepage', (app.request.query.all)|merge({'country': data.country})) }}">
                            {{ data.country|country }} ({{ data.number }})
                        </a>
                    {% if loop.index > 4 %}
                        <li>
                            <a href="#" class="filter-action"><img class="sprite-icon-dark-arrow-up" src="{{ asset('bundles/sensiolabsjobboard/images/blank.png') }}" alt="^" /> {{ 'home.less'|trans }} </a>
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
        <div class="filter">
            <span class="title"><img class="sprite-icon-paperclip" alt=">" src="{{ asset('bundles/sensiolabsjobboard/images/blank.png') }}"/> {{ 'home.contract_type'|trans }} </span>
            <ul>
                <li {% if not app.request.query.has('contract-type') %}class="active"{% endif %}>
                    <a href="{{ path('homepage', (app.request.query.all)|merge({'contract-type': null})) }}">
                        {{ 'home.all_contract_type'|trans }}
                    </a>
                </li>
                {% for data in contract_types %}
                    <li {% if loop.index > 3 %}style="display:none"{% endif %}
                        {% if data.contractType == app.request.query.get('contract-type') %}class="active"{% endif %}>

                        <a href="{{ path('homepage', (app.request.query.all)|merge({'contract-type': data.contractType})) }}">
                            {{ data.contractType }} ({{ data.number }})
                        </a>
                    </li>

                    {% if loop.index > 4 %}
                        <li>
                            <a href="" class="filter-action"><img class="sprite-icon-dark-arrow-up" src="{{ asset('bundles/sensiolabsjobboard/images/blank.png') }}" alt="^" /> {{ 'home.less'|trans }}</a>
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
        </div>
        <ul class="function">
            <li>
                <a href="{{ path('homepage') }}"><img class="sprite-icon-dark-arrow-right" src="{{ asset('bundles/sensiolabsjobboard/images/blank.png') }}" alt=">" /> {{ 'home.all_jobs'|trans }}</a>
            </li>
        </ul>
        <div class="feed">
            <a href="{{ path('job_feed', (app.request.query.all)) }}">
                <img src="{{ asset('bundles/sensiolabsjobboard/images/rss.png') }}" width="16" height="16" />
                <span>{{ 'home.rss'|trans }}</span>
            </a>
        </div>
    </div>
    <div id="right">
        <div id="job-container">
            {% include 'SensioLabsJobBoardBundle:Includes:job_container.html.twig' %}
        </div>
        <div
            data-page="1"
            data-url="{{ path('homepage', (app.request.query.all)) }}"
            data-empty="<center>No more jobs to show.</center>"
            id="loadmoreajaxloader"
            style="display:none;"
        >
            <center><img src="{{ asset('bundles/sensiolabsjobboard/images/ajax-loader.gif') }}" height="16" /></center>
        </div>
    </div>
    <div class="clear"></div>
    <script>
        var seeMore = "{{ 'home.more'|trans }}";
        var seeLess = "{{ 'home.less'|trans }}";
        var blank = "{{ asset('bundles/sensiolabsjobboard/images/blank.png') }}";
    </script>
{% endblock %}

{% block javascript %}
    {{ parent() }}
    {% javascripts output='js/homepage.js'
        '@SensioLabsJobBoardBundle/Resources/assets/homepage.js'
    %}
        <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}
